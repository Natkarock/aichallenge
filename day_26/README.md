# üìò Autotest Agent

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ª—é–±—ã—Ö —è–∑—ã–∫–æ–≤

–≠—Ç–æ—Ç –∞–≥–µ–Ω—Ç ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ö–ª–æ–Ω–∏—Ä—É–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**.
2. **–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –≤–µ—Ç–∫—É** –ø–æ–¥ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤.
3. **–°—Ç—Ä–æ–∏—Ç snapshot –ø—Ä–æ–µ–∫—Ç–∞** (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ + —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ–¥–∞).
4. **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Ç—Ä–µ–±—É—é—Ç —Ç–µ—Å—Ç–æ–≤** ‚Äî —á–µ—Ä–µ–∑ LLM-–∞–Ω–∞–ª–∏–∑.
5. **–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤.
6. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç unit-—Ç–µ—Å—Ç—ã, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —è–∑—ã–∫ –∏ —Å—Ç–µ–∫** (Java/Kotlin/Swift/Python/JS/TS/C#/Go/...).
7. **–ü—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è**, —Å–æ–∑–¥–∞–≤–∞—è –∏ –æ–±–Ω–æ–≤–ª—è—è —Ñ–∞–π–ª—ã.
8. **–ö–æ–º–º–∏—Ç–∏—Ç –∏ –ø—É—à–∏—Ç** –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É.

–ê–≥–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —è–∑—ã–∫–æ-–∞–≥–Ω–æ—Å—Ç–∏—á–µ–Ω ‚Äî –æ–Ω –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ Python, —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ç–µ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —Ñ–∞–π–ª–∞–º –ø—Ä–æ–µ–∫—Ç–∞.

---

# üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

## üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç snapshot –ø—Ä–æ–µ–∫—Ç–∞ –∏ –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª—ã, –≥–¥–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏–Ω–µ—Å—É—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø–æ–ª—å–∑—É:

- –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
- –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
- –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∫–æ–¥

–ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è:

- —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (`*_test`, `test_*`, `tests/`, `src/test/...`)
- –±–∏–Ω–∞—Ä–Ω–∏–∫–∏, –∞—Å—Å–µ—Ç—ã –∏ —Ç.–¥.

---

## üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–ß—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –±—ã–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏, –∞–≥–µ–Ω—Ç —Å–Ω–∞—á–∞–ª–∞ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç LLM:

> ¬´–ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Å–ª—É–∂–∞—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∫ —ç—Ç–æ–º—É —Ñ–∞–π–ª—É?¬ª

LLM –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ **—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã**  
(–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —É—Ç–∏–ª–∏—Ç—ã, –º–æ–¥–µ–ª–∏, –∫–æ–Ω—Ñ–∏–≥–∏, —Å–µ—Ä–≤–∏—Å—ã, import-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Ç.–¥.)

–ö–æ–Ω—Ç–µ–∫—Å—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –¥–ª–∏–Ω–µ ‚Üí —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤.

---

## üß™ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –ø–æ–¥ –ª—é–±–æ–π —è–∑—ã–∫

LLM –ø–æ–ª—É—á–∞–µ—Ç:

- –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
- –ø–æ–ª–Ω—ã–π –∫–æ–¥ —Ñ–∞–π–ª–∞
- –∫–æ–¥—ã —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–ò –ø–∏—à–µ—Ç:

- —Ç–µ—Å—Ç—ã –ø–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–µ–∫ (JUnit, XCTest, pytest, Jest, Vitest, Go test, NUnit –∏ —Ç.–¥.)
- –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tests/TestUserService.java`)
- –ª–∏–±–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
- –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏—Ç –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∫–æ–¥, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏

---

## üì¶ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ö–∞–∂–¥—ã–π LLM-–æ—Ç–≤–µ—Ç ‚Äî —ç—Ç–æ `ChangeSet`:

```json
{
  "change_notes": "...",
  "changes": [{ "path": "tests/TestUserService.java", "content": "–ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª" }]
}
```

–ê–≥–µ–Ω—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Ü–µ–ª–∏–∫–æ–º.

---

## üåø Git-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```
git clone / pull
git checkout -b auto-tests-<slug>
apply changes
git commit -am "autotests: X files updated"
git push origin auto-tests-<slug>
```

---

# ‚öôÔ∏è –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

## 1) Clone / Pull

–ü—Ä–æ–µ–∫—Ç —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –≤:

```
<workdir>/<–Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
```

---

## 2) Snapshot –ø—Ä–æ–µ–∫—Ç–∞

–°–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è:

- —É–∫–∞–∑–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `--include` –º–∞—Å–∫–∏
- –∏—Å–∫–ª—é—á–µ–Ω–∏—è `--exclude`
- –ø–µ—Ä–≤—ã–µ `--max-file-chars` —Å–∏–º–≤–æ–ª–æ–≤ —Ñ–∞–π–ª–∞
- –Ω–µ –±–æ–ª–µ–µ `--max-files` —Ñ–∞–π–ª–æ–≤

–í—ã—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π snapshot.

---

## 3) –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏

```
auto-tests-<repo-name>
```

---

## 4) LLM: –≤—ã–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

–§—É–Ω–∫—Ü–∏—è `select_files_for_tests()` –ø–æ–ª—É—á–∞–µ—Ç snapshot –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π:

```json
{ "files": ["src/UserService.java", "core/Parser.ts"] }
```

---

## 5) LLM: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

–ü–æ–¥–∞—ë–º **—É–∫–æ—Ä–æ—á–µ–Ω–Ω—ã–π –∫–æ–¥** –∏ **—É–∫–æ—Ä–æ—á–µ–Ω–Ω—ã–π snapshot**:

- `--related-file-chars`
- `--related-snapshot-chars`

---

## 6) LLM: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

LLM —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:

- —è–∑—ã–∫ (–ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –∏ —Å—Ç–∏–ª—é)
- —Å—Ç–µ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (JUnit/pytest/Jest/etc.)
- —Ñ–æ—Ä–º–∞—Ç test-—Ñ–∞–π–ª–æ–≤

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:

- –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∫–æ–¥–µ

---

## 7) –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–°–æ–∑–¥–∞—ë—Ç—Å—è `change_notes.md`.  
–í—Å–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è.

---

## 8) Commit + Push

```
git commit -am "autotests: <N> files updated"
git push
```

---

# üèÅ –ó–∞–ø—É—Å–∫

```bash
python -m autopub.cli   --repo "https://github.com/user/project.git"   --workdir "/Users/user/tmp"   --branch-prefix "auto-tests"   --include "**/*"   --exclude "**/*.png,**/*.jpg,**/*.jpeg,**/*.gif,**/*.zip"   --max-file-chars 6000   --max-files 500   --related-snapshot-chars 8000   --related-file-chars 2000   --llm-model "gpt-4.1"
```

---

# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤

- —É–º–µ–Ω—å—à–∞—Ç—å `--related-snapshot-chars`
- —É–º–µ–Ω—å—à–∞—Ç—å `--related-file-chars`
- —É–º–µ–Ω—å—à–∞—Ç—å `--max-file-chars`
- —É–º–µ–Ω—å—à–∞—Ç—å `--max-files`

---
